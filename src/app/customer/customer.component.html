<!--edit page-->
<div>
<div class="container" *ngIf="isEdit">
    <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
        <div fxFlex="50%">
            <mat-form-field class="full">
                <input matInput [formControl]="customer['company_name']" placeholder="公司名称" required>
            </mat-form-field>
            <mat-error *ngIf="customer['company_name'].hasError('required')">
                请输入公司名称
            </mat-error>
        </div>
        <div fxFlex="25%">
            <mat-form-field class="full">
                <input matInput [formControl]="customer['legal_fullname']" placeholder="法人姓名">
            </mat-form-field>
        </div>
        <div fxFlex="25%">
            <mat-form-field class="full">
                <mat-select [formControl]="customer['assignee']" placeholder="顾问姓名">
                    <mat-option *ngFor="let r of _users" [value]="r.id">
                        {{r.first_name}} {{r.last_name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </div>
    <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
        <div fxFlex="30%">
              <mat-form-field class="full">
                <input matInput [formControl]="customer['contact_fullname']" placeholder="联系人" required>
            </mat-form-field>
            <mat-error *ngIf="customer['contact_fullname'].hasError('required')">
                请输入联系人
            </mat-error>
        </div>
        <div fxFlex="35%">
            <mat-form-field class="full">
                <mat-select [formControl]="jobControl['type']" placeholder="业务类型">
                    <mat-option *ngFor="let r of jobTypes" [value]="r.id">
                        {{r.label}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div fxFlex="35%">
            <mat-form-field class="full">
                <input matInput [formControl]="customer['contact_work_phone']" placeholder="办公电话">
            </mat-form-field>
        </div>
    </div>
    <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
        <div fxFlex="25%">
            <mat-form-field class="full">
                <input matInput [formControl]="customer['contact_cell_phone']" placeholder="手机" required>
            </mat-form-field>
            <mat-error *ngIf="customer['contact_cell_phone'].hasError('required')">
                请输入手机
            </mat-error>
        </div>
        <div fxFlex="25%">
            <mat-form-field class="full">
                <input matInput [formControl]="customer['wechat_id']" placeholder="微信">
            </mat-form-field>
        </div>
        <div fxFlex="25%">
            <mat-form-field class="full">
                <input matInput [formControl]="customer['customer_email']" placeholder="邮箱">
            </mat-form-field>
        </div>
        <div fxFlex="25%">
            <mat-form-field class="full">
                <input matInput [formControl]="customer['city']" placeholder="所在城区" required>
            </mat-form-field>
            <mat-error *ngIf="customer['city'].hasError('required')">
                请输入所在城区
            </mat-error>
        </div>
    </div>
    <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
        <div fxFlex="30%">
            <mat-form-field class="full">
                <input matInput type="number" [formControl]="customer['payment_amount']" placeholder="付款金额">
                <span matPrefix>¥&nbsp;</span>
            </mat-form-field>
        </div>
        <div fxFlex="33%">
                <mat-radio-group
                    aria-labelledby="radio-group-label_1"
                    class="radio-group-1"
                    [(ngModel)]="customer['is_paid']">
                    <mat-radio-button class="radio-button-1" *ngFor="let p of paids" [value]="p.v">
                        {{p.label}}
                    </mat-radio-button>
                    </mat-radio-group>
        </div>

        <div fxFlex="37%">
            <mat-form-field class="full">
                <mat-select [formControl]="customer['way_of_payment']" placeholder="付款方式">
                    <mat-option *ngFor="let r of paymentMethods" [value]="r.id">
                        {{r.label}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        </div>
        <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
            <div fxFlex="30%">
                <mat-form-field class="full">
                    <input matInput type="number" [formControl]="customer['cost']" placeholder="成本价格">
                    <span matPrefix>¥&nbsp;</span>
                </mat-form-field>
            </div>
            <div fxFlex="70%">
                <mat-form-field class="full">
                    <input matInput [formControl]="customer['registered_address']" placeholder="注册地址">
                </mat-form-field>
            </div>
        </div>
        <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
            <div fxFlex="30%">
                <mat-form-field class="full">
                    <mat-select [formControl]="customer['lead_source']" placeholder="客户来源">
                        <mat-option *ngFor="let r of lead_source" [value]="r.id">
                            {{r.label}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxFlex="70%">
                <mat-form-field class="full">
                    <input matInput [formControl]="customer['doc_location']" placeholder="档案位置">
                </mat-form-field>
            </div>
        </div>

        <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
            <div fxFlex="30%">
                <mat-form-field class="full">
                    <mat-select [formControl]="customer['taxpayer_type']" placeholder="纳税人类型">
                        <mat-option *ngFor="let r of taxpayer_type" [value]="r.id">
                            {{r.label}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxFlex="33%">
                <mat-form-field class="full">
                    <mat-select [formControl]="customer['tax_type']" placeholder="税控类型">
                        <mat-option *ngFor="let r of tax_type" [value]="r.id">
                            {{r.label}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxFlex="37%">
                <mat-form-field class="full">
                    <mat-select [formControl]="customer['business_type']" placeholder="所述行业">
                        <mat-option *ngFor="let r of business_type" [value]="r.id">
                            {{r.label}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
            <div fxFlex="33%">
                <mat-form-field class="full">
                    <input matInput [formControl]="customer['tax_code']" placeholder="纳税号">
                </mat-form-field>
            </div>
            <div fxFlex="33%">
                <mat-form-field class="full">
                    <input matInput [formControl]="customer['yzt_pwd']" placeholder="一证通密码">
                </mat-form-field>
            </div>
            <div fxFlex="33%">
                <mat-form-field class="full">
                    <input matInput [formControl]="customer['personal_tax_pwd']" placeholder="个税密码">
                </mat-form-field>
            </div>
        </div>

        <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
            <div fxFlex="50%">
                <mat-form-field class="full">
                    <input matInput [formControl]="customer['sales_fullname']" placeholder="销售姓名">
                </mat-form-field>
            </div>
            <div fxFlex="50%">
                <mat-form-field class="full">
                    <input matInput [formControl]="customer['accounting_fullname']" placeholder="会计姓名">
                </mat-form-field>
            </div>
        </div>
      
        <div fxLayout="row" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="20px" fxLayoutGap.xs="0">
            <div fxFlex="100%">
                <mat-form-field class="full">
                    <input matInput [formControl]="customer['remarks']" placeholder="备注">
                </mat-form-field>
            </div>
        </div>
          <!--File uploads-->
        <app-file-upload (onFileDropped)="onFileDropped($event)" [uploads]="selectedCustomer['files']" [type]="'customer_id'"></app-file-upload>
        <!--//-->

</div>

<!--view page-->
<div class="" *ngIf="!isEdit && selectedCustomer">
    <table class="table">
        <tr>
            <td>公司名称</td>
            <td colspan="3"><b>{{selectedCustomer['company_name']}}</b></td>
        </tr>
        <tr>
            <td>业务类型</td>
            <td><b>{{getJobType(selectedJob['type'])}}</b></td>
            <td>成本价格</td>
            <td><b>{{selectedCustomer['cost']}}</b></td>
        </tr>
        <tr>
            <td>顾问姓名</td>
            <td><b>{{findUserName(selectedCustomer['assignee'])}}</b></td>
            <td>联系人姓名</td>
            <td><b>{{selectedCustomer['contact_fullname']}}</b></td>
        </tr>
        <tr>
            <td>微信号</td>
            <td><b>{{selectedCustomer['wechat_id']}}</b></td>
            <td>电话</td>
            <td><b>{{selectedCustomer['cell_phone']}} / {{selectedCustomer['work_phone']}}</b></td>
        </tr>
        <tr>
            <td>所在城区</td>
            <td><b>{{selectedCustomer['city']}}</b></td>
            <td>邮箱</td>
            <td><b>{{selectedCustomer['customer_email']}}</b></td>
        </tr>
        <tr>
            <td>付款金额</td>
            <td><b>{{selectedCustomer['payment_amount']}}</b> </td>
            <td>注册地址</td>
            <td>{{selectedCustomer['office_address']}}</td>
        </tr>
        <tr>
            <td>是否交费</td>
            <td><b>{{getPaid(selectedCustomer['is_paid'])}}</b></td>
            <td>办公地址</td>
            <td><b>{{selectedCustomer['registered_address']}}</b></td>
        </tr>
        <tr>
            <td>付款方式</td>
            <td><b>{{selectedCustomer['way_of_payment']}}</b></td>
            <td>法人姓名</td>
            <td><b>{{selectedCustomer['legal_fullname']}}</b></td>
        </tr>
        <tr>
            <td>客户来源</td>
            <td><b>{{selectedCustomer['lead_source']}}</b></td>
            <td>档案位置</td>
            <td><b>{{selectedCustomer['doc_location']}}</b></td>
        </tr>
        <tr>
            <td>纳税人类型</td>
            <td><b>{{getTaxPayerType(selectedCustomer['taxpayer_type'])}}</b></td>
            <td>税控类型</td>
            <td><b>{{getTaxType(selectedCustomer['tax_type'])}}</b></td>
        </tr>
        <tr>
            <td>纳税号</td>
            <td><b>{{selectedCustomer['tax_code']}}</b></td>
            <td colspan="2">
                <div class="row">
                    <div class="col-6">
                        一证通密码:<b>{{selectedCustomer['yzt_pwd'] || "  空  "}}</b>
                    </div>
                    <div class="col-6">
                        个税密码:<b>{{selectedCustomer['personal_tax_pwd'] || "  空  "}}</b>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>销售姓名</td>
            <td><b>{{selectedCustomer['sales_fullname']}}</b></td>
            <td>会计姓名</td>
            <td><b>{{selectedCustomer['accounting_fullname']}}</b></td>
        </tr>
        <tr>
            <td>所述行业</td>
            <td><b>{{getBusinessType(selectedCustomer['business_type'])}}</b></td>
            <td>顾问备注</td>
            <td><b>{{selectedCustomer['remarks']}}</b></td>
        </tr>
        <tr>
            <td colspan="2">
                <mat-list>
                    <mat-list-item *ngFor="let file of selectedCustomer['files']">
                      <p matLine>
                        <span class="link-1" (click)="onDownloadFile(file.id)"> {{file.file_path}} </span>
                        <span class="demo-2"> -- {{_formatDate(file.created_date)}} </span>
                      </p>
                    </mat-list-item>
                  </mat-list>
            </td>
        </tr>
    </table>
</div>
</div>